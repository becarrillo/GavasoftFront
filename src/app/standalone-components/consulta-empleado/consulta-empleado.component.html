<app-logged-in-user-menu-navbar [rolName]="'Administrador'" [theme]="theme" (themeTogglerEvent)="toggleTheme($event)">
</app-logged-in-user-menu-navbar>
@if (!toRealizarConsulta) {
    <div [ngClass]="{
                'grid': true, 'grid-cols-1': true, 'bg-zinc-700': theme==='dark',
                'mt-24': true, 'py-14': true, 'gap-y-3': true,'h-screen': true,
                'md:gap-y-0': true, 'md:mt-11': true, 'overflow-x-hidden': true,
                'lg:gap-y-0': true, 'lg:mt-11': true,
                'xl:gap-y-5': true, 'xl:mt-11': true, 'xl:h-full': true,
                '2xl:gap-y-7': true, '2xl:mt-11': true, '2xl:h-full': true
            }">
        <h3 [ngClass]="['text-center', 'text-4xl', 'text-0-cool-gray', 'font-semibold']">
            Consultar Empleado
        </h3>
        <div [ngClass]="[
                    'grid', 'grid-cols-1', 'grid-rows-2','gap-y-2', 'justify-self-center', 'shadow-md',
                    'shadow-zinc-300', 'items-center', 'px-2', 'w-11/12', 'h-min', 'md:w-11/12',
                    'md:grid-cols-3', 'md:grid-rows-1', 'md:gap-x-2', 'md:gap-y-0',  'lg:grid-cols-3',
                    'lg:grid-rows-1', 'lg:gap-x-2', 'lg:gap-y-0', 'lg:w-11/12', 'xl:grid-cols-3',
                    'xl:grid-rows-1',  'xl:gap-x-2', 'xl:gap-y-0', 'xl:w-11/12', '2xl:grid-cols-3',
                    '2xl:grid-rows-1',  '2xl:gap-x-2', '2xl:gap-y-0', '2xl:w-8/12'
                ]">
            <img [ngSrc]="'../../../../assets/employees.png'" [ngClass]="[
                        'opacity-85', 'md:col-span-2', 'lg:col-span-2',
                        'xl:col-span-2', '2xl:col-span-2'
                    ]" width="1080" height="1080" priority />
            <div [ngClass]="{
                        'flex': true, 'flex-col': true, 'space-y-5': true, 'mt-20': true, 'px-4': true,
                        'py-10': true, 'rounded-lg': true, 'bg-zinc-600': theme==='dark',
                        'bg-amber-50': theme==='light', 'md:space-y-5': true, 'md:mt-0': true,
                        'md:px-1.5': true, 'lg:space-y-6': true, 'lg:mt-0': true, 'lg:px-1.5': true,
                        'xl:space-y-6': true, 'xl:mt-0': true, 'xl:px-8': true, '2xl:space-y-6': true,
                        '2xl:mt-0': true, '2xl:px-8': true
                    }">
                <button [ngClass]="['self-center', 'rounded-lg', 'shadow-md', 'shadow-slate-400']"
                    (click)="toRealizarConsulta=true">
                    <img [ngClass]="'opacity-65'" [ngSrc]="
                                'https://img.icons8.com/external-others-ghozy-muhtarom/64/external-find-organization-smooth-others-ghozy-muhtarom.png'
                            " width="64" height="64" />
                </button>
                <p [ngClass]="{
                            'text-justify': true, 'text-sm': true, 'text-white': theme==='dark', 'text-2-smooky-black': theme==='light', 'self-center': true, 'px-1': true, 'md:px-3': true,
                            'lg:px-3': true, '2xl:px-9': true
                        }
                    ">
                    Usted podrá realizar una consulta de un empleado por número de documento, o de uno o lista
                    de más de un empleado con el mismo nombre (sin indicar apellidos).
                </p>
            </div>
        </div>
    </div>
} @else {
    <div [ngClass]="{
            'flex': true, 'flex-col': true, 'w-full': true, 'h-screen': true, 'bg-zinc-700': theme==='dark',
            'overflow-x-hidden': true, 'mt-24': true, 'pt-36': true, 'space-y-9': true, 'mx-auto': true, 
            'md:mt-12': true, 'lg:mt-11': true, 'xl:mt-11': true, '2xl:mt-11': true
        }">
        <h3 [ngClass]="{
                'text-center': true, 'text-2xl': true, 'text-0-cool-gray': theme==='dark',
                'font-semibold': true, 'md:text-3xl lg:text-4xl xl:text-4xl 2xl:text-4xl': true
            }">
            Consultar Empleado
        </h3>
        <div class="flex flex-col space-y-5 px-4 py-6 mx-auto w-3/4 
                rounded-md shadow-lg shadow-slate-700 bg-gradient-to-r from-indigo-600 to-2-electric-blue 
                md:w-9/12 lg:w-7/12 xl:w-7/12 2xl:w-5/12">
            <form class="flex flex-col space-y-3.5  md:space-y-0 
                    md:justify-around  lg:space-y-0 
                    xl:space-y-0"
                (submit)="submitSearch($event)"
            >
                <fieldset [ngClass]="[
                        'grid', 'grid-cols-1', 'gap-y-7', 'justify-items-center', 'grid-rows-3', 'py-4',
                        'gap-y-2', 'lg:grid-cols-2', 'lg:grid-rows-2', 'xl:grid-cols-2', 'xl:grid-rows-2',
                        '2xl:grid-cols-2', '2xl:grid-rows-2'
                    ]">
                    <input type="search"
                        class="self-center w-60 h-9 rounded-lg text-center md:w-56 lg:w-60 xl:w-64 2xl:w-64"
                        (change)="setConsultaByOption('num_documento', $event)" placeholder="número de documento id" />
                    <input type="search"
                        class="self-center w-60 h-9 rounded-lg text-center md:w-56 lg:w-60 xl:w-64 2xl:w-64"
                        (change)="setConsultaByOption('nombre', $event)" placeholder="nombre" />
                    <button class="
                            self-center w-60 h-9 mx-auto py-1.5 rounded-lg bg-green-700 text-white 
                            lg:col-span-2 xl:col-span-2 2xl:col-span-2 
                            hover:bg-cyan-600
                        "
                        type="submit"
                    >
                        BUSCAR
                    </button>
                </fieldset>
            </form>
            <hr>
            <div class="flex flex-col mx-auto shadow-md shadow-cyan-700  rounded-sm 
                    pt-0.5 pb-1 w-full md:shadow-cyan-700 lg:shadow-none 
                    xl:shadow-cyan-700 2xl:shadow-cyan-700"
            >
                @if (empleado===undefined) {
                    <tr><span [ngClass]="['italic', 'text-zinc-300']">Resultados : 0</span></tr>
                }
                <table [ngClass]="{
                        'visible flex flex-col table-auto overflow-x-auto w-11/12': empleado || empleadosArray.length>0,
                        'bg-white': empleado || empleadosArray.length>0, 'opacity-80 border border-separate border-black mx-auto': empleado || empleadosArray.length>0
                    }"
                    *ngIf="empleado || empleadosArray.length>0"
                >
                    <caption class="text-sm font-serif font-semibold mb-1 py-0.5">Resultado</caption>
                    <thead [ngClass]="['text-sm', 'w-screen']">
                        <tr [ngClass]="['flex', 'justify-around']">
                            <th [ngClass]="['px-3', 'py-3']"></th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">Apellidos</th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">Nombre</th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">No. documento</th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">Tipo documento</th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">Rol</th>
                            <th [ngClass]="['w-40', 'py-3', 'text-center']">Acción</th>
                        </tr>
                    </thead>
                    <tbody [ngClass]="['text-sm', 'w-screen', 'py-0.5']">
                        @switch (consultaOption) {
                            @case ("num_documento") {
                                <tr [ngClass]="['flex', 'border',  'justify-around', 'w-screen', 'py-2']">
                                    <td [ngClass]="['px-3', 'py-3']">
                                        <input name="action" (focus)="
                                                            enableEmpleadoActionBtns(empleado.num_documento)
                                                        " type="radio" />
                                    </td>
                                    <td [ngClass]="['inline-block', 'px-8', 'py-3']">{{empleado.apellidos}}</td>
                                    <td [ngClass]="['w-40', 'py-3', 'text-center']">{{empleado.nombre}}</td>
                                    <td [ngClass]="['w-40', 'py-3', 'text-center']">{{empleado.num_documento}}</td>
                                    <td [ngClass]="['w-40', 'py-3', 'text-center']">{{empleado.tipo_documento}}</td>
                                    <td [ngClass]="['w-40', 'py-3',  'text-center']">{{empleado.rol || 'NULL'}}</td>
                                    <td [ngClass]="['grid', 'grid-rows-3', 'w-40', 'py-1', 'text-center']">
                                        <button [ngClass]="{
                                                            'bg-neutral-300  cursor-default': empleado.num_documento!==radioCheckedReference,
                                                            'bg-0-inst-blue outline outline-neutral-300 cursor-pointer hover:bg-cyan-800': empleado.num_documento===radioCheckedReference,
                                                            'mx-auto px-3 py-1 text-sm rounded-t-md text-white w-28 h-8': true
                                                        }" [disabled]="empleado.num_documento!==radioCheckedReference"
                                            [id]="empleado.num_documento.concat('UpdateEmpleadoActionBtn')" type="button">
                                            <a [routerLink]="
                                                                '/menus/menu-administrador/admin-empleados/consultar/'+empleado.num_documento+'/modificar'
                                                            " routerLinkActive="router-link-active" [ngClass]="{
                                                                'cursor-auto': empleado.num_documento!==radioCheckedReference,
                                                                'cursor-pointer': empleado.num_documento===radioCheckedReference
                                                            }
                                                        "
                                            >
                                                Modificar
                                            </a>
                                        </button>
                                        <button
                                            [ngClass]="{
                                                'disabled:bg-neutral-300  disabled:cursor-default': true,
                                                'enabled:bg-red-600 enabled:outline enabled:outline-neutral-300': true,
                                                'enabled:cursor-pointer': true,
                                                'mx-auto px-3 py-1 text-sm rounded-t-md text-white w-28 h-8': true
                                            }"
                                            [disabled]="empleado.num_documento!==radioCheckedReference"
                                            [id]="empleado.num_documento.concat('DropEmpleadoActionBtn')"
                                            type="button"
                                            (click)="toggleModalToDelete(modalToDeleteIsOpen, empleado.num_documento)"
                                        >
                                            Eliminar
                                        </button>
                                        <button
                                            [ngClass]="{
                                                'bg-neutral-300  cursor-default': empleado.num_documento!==radioCheckedReference,
                                                'bg-black outline outline-neutral-300 cursor-pointer hover:bg-cyan-800': empleado.num_documento===radioCheckedReference,
                                                'mx-auto px-3 py-1 text-sm rounded-b-md text-white w-28 h-8': true
                                            }"
                                            [disabled]="empleado.num_documento!==radioCheckedReference"
                                            [id]="empleado.num_documento.concat('AssignRoleEmpleadoActionBtn')"
                                            type="button"
                                        >
                                            <a
                                                [routerLink]="
                                                    '/menus/menu-administrador/admin-empleados/consultar/'+empleado.num_documento+'/asignar-rol'
                                                "
                                                routerLinkActive="router-link-active"
                                                [ngClass]="{
                                                    'cursor-auto': empleado.num_documento!==radioCheckedReference,
                                                    'cursor-pointer': empleado.num_documento===radioCheckedReference
                                                }"
                                            >
                                                Asignar rol
                                            </a>
                                        </button>
                                    </td>
                                </tr>
                            }
                            @case ("nombre") {
                                @for (item of empleadosArray; track item) {
                                    <tr [ngClass]="['flex', 'border',  'justify-around', 'w-screen', 'py-2']">
                                        <td class="p-3">
                                            <input
                                                name="action"
                                                (focus)="enableEmpleadoActionBtns(item.num_documento)"
                                                type="radio"
                                            />
                                        </td>
                                        <td [ngClass]="['px-8', 'py-3', 'text-center']">{{item.apellidos}}</td>
                                        <td [ngClass]="['px-8', 'py-3', 'text-center']">{{item.nombre}}</td>
                                        <td [ngClass]="['px-8', 'py-3', 'text-center']">{{item.num_documento}}</td>
                                        <td [ngClass]="['px-8', 'py-3', 'text-center']">{{item.tipo_documento}}</td>
                                        <td [ngClass]="['px-8', 'py-3', 'text-center']">{{item.rol}}</td>
                                        <td [ngClass]="['px-8', 'py-1']">
                                            <button [ngClass]="{
                                                                'bg-neutral-300  cursor-default': empleado.num_documento!==radioCheckedReference,
                                                                'bg-0-inst-blue outline outline-neutral-300 cursor-pointer hover:bg-cyan-800': empleado.num_documento===radioCheckedReference,
                                                                'mx-auto px-3 py-1 text-sm rounded-t-md text-white w-28 h-8': true
                                                            }" [disabled]="item.num_documento!==radioCheckedReference"
                                                [id]="item.num_documento.concat('UpdateEmpleadoActionBtn')" type="button">
                                                <a [routerLink]="
                                                                    '/menus/menu-administrador/admin-empleados/consultar/'+item.num_documento+
                                                                    '/modificar'
                                                                " routerLinkActive="router-link-active" [ngClass]="{
                                                                    'cursor-auto': item.num_documento!==radioCheckedReference,
                                                                    'cursor-pointer': item.num_documento===radioCheckedReference
                                                                }
                                                            ">
                                                    Modificar
                                                </a>
                                            </button>
                                            <button
                                                [ngClass]="{
                                                    'disabled:bg-neutral-300  disabled:cursor-default': true,
                                                    'enabled:bg-red-600 enabled:outline enabled:outline-neutral-300': true,
                                                    'enabled:cursor-pointer': true,
                                                    'mx-auto px-3 py-1 text-sm rounded-t-md text-white w-28 h-8': true
                                                }"
                                                [disabled]="item.num_documento!==radioCheckedReference"
                                                [id]="item.num_documento.concat('DropEmpleadoActionBtn')"
                                                type="button"
                                                (click)="toggleModalToDelete(modalToDeleteIsOpen, item.num_documento)"
                                            >
                                                Eliminar
                                            </button>
                                            <button [ngClass]="{
                                                                'bg-neutral-300  cursor-default': item.num_documento!==radioCheckedReference,
                                                                'bg-black outline outline-neutral-300 cursor-pointer hover:bg-cyan-800': item.num_documento===radioCheckedReference,
                                                                'mx-auto px-3 py-1 text-sm rounded-t-md text-white w-28 h-8': true
                                                            }" [disabled]="item.num_documento!==radioCheckedReference"
                                                [id]="item.num_documento.concat('AssignRoleEmpleadoActionBtn')" type="button"
                                            >
                                                <a [routerLink]="
                                                                    '/menus/menu-administrador/admin-empleados/'
                                                                    +item.num_documento+'/asignar-rol'
                                                                " routerLinkActive="router-link-active" [ngClass]="{
                                                                    'cursor-auto': item.num_documento!==radioCheckedReference,
                                                                    'cursor-pointer': item.num_documento===radioCheckedReference
                                                                }
                                                            ">
                                                    Asignar rol
                                                </a>
                                            </button>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <button [routerLink]="'/menus/menu-administrador'"
            routerLinkActive="router-link-active"
            [ngClass]="[
                'rounded-3xl', 'ring-2', 'ring-slate-200', 'bg-1-heliotrope', 'opacity-90',
                'font-semibold', 'w-24', 'h-24', 'cursor-pointer', 'z-10', 'fixed', 'right-9',
                'bottom-16', 'md:right-32', 'lg:right-36', 'xl:right-36', '2xl:right-56',
                'hover:bg-cyan-500'
            ]"
        >
            <h4>REGRESAR AL MENÚ</h4>
        </button>

        <!-- Ventana modal de eliminación de la cuenta Empleado -->
        <dialog
            role="dialog"
            aria-modal="true"
            [ngClass]="{
                'modal-delete grid grid-rows-3 gap-y-3 self-center px-11 py-8 z-20 backdrop-blur-xl fixed top-28' : modalToDeleteIsOpen
            }"
            id="modalToDeleteElement"
        >
            <h3>Confirmación</h3>
            <p>¿Está usted seguro de guardar los cambios?</p>
            <div class="flex space-x-7 mx-auto py-7">
                <button [ngClass]="[
                        'px-5', 'py-2', 'bg-teal-700', 'text-white',
                        'hover:bg-teal-600', 'hover:transition',
                        'hover:transition',
                        'hover:ease-in', 'hover:duration-150',
                        'hover:scale-105'
                    ]"
                    (click)="toggleModalToDelete(modalToDeleteIsOpen, empleadoToDeleteNumDocumento)"
                >
                    NO
                </button>

                <button [ngClass]="[
                        'px-5', 'py-2',
                        'bg-red-600', 'text-white',
                        'hover:bg-red-500', 'hover:transition',
                        'hover:ease-in', 'hover:duration-150',
                        'hover:scale-105'
                    ]"
                    (click)="deleteEmpleado(empleadoToDeleteNumDocumento)"
                >
                    SI
                </button>
            </div>
        </dialog>
    </div>
}